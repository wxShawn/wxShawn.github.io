import{r as C,o as w,a as f,c as l,b as r,F as x,d as v,w as A,v as F,f as _,j as L,u as y,i as k,e as n,n as M,t as z,I as E,g as O,h as R}from"./index.3699296e.js";import{m as U}from"./marked.esm.90bd3cda.js";import{_ as b}from"./Card.cc7f0d15.js";import{a as B}from"./index.d2037a4d.js";import{h as q}from"./utils.0c3e84f2.js";import{S as G}from"./SearchOutlined.41bdb063.js";const H={class:"py-5 flex flex-col gap-5"},J={class:"p-4 flex flex-wrap gap-2 justify-between items-center bg-white shadow-md rounded-xl"},K={class:"flex flex-wrap gap-x-3 gap-y-1"},Q=r("div",{class:"text-purple-400 font-semibold select-none"},"Blog",-1),W=["onClick"],X={class:"flex gap-3"},Y={key:2,class:"mt-20 text-center text-purple-500"},le={__name:"Blog",setup(Z){const p=C([]),S=async()=>{const t=await B.getPostCategories();if(t.code===0){p.push({id:0,name:"All"});const{rows:s}=t.result;for(let e=0,i=s.length;e<i;e++){const d=s[e].id,o=s[e].name;p.push({id:d,name:o})}}};w(()=>{S()});const m=f(0),D=t=>{m.value=t,g()},h=f(""),N=()=>{g()},u=C([]),g=async(t,s)=>{c.value="loading";const e=h.value,i=m.value,d=await B.getPosts(t,s,e,i);if(d.code===0){const{rows:o}=d.result;u.length=0;for(let a=0,V=o.length;a<V;a++){const I=o[a].id,T=o[a].title,$=new Date(o[a].createdAt).toLocaleDateString(),j=q(U(o[a].content));u.push({id:I,title:T,date:$,content:j})}c.value=u.length===0?"none":"success"}};w(()=>{g()});const c=f("loading"),P=t=>{R.push({name:"post",params:{id:t}})};return(t,s)=>(n(),l("div",H,[r("div",J,[r("ul",K,[Q,(n(!0),l(x,null,v(p,e=>(n(),l("li",{class:M(["text-gray-400 hover:text-purple-400 cursor-pointer",{"text-purple-400":m.value===e.id}]),key:e,onClick:i=>D(e.id)},z(e.name),11,W))),128))]),r("div",X,[A(r("input",{type:"text",class:"h-8 p-2 border border-purple-400 rounded-md outline-none text-sm","onUpdate:modelValue":s[0]||(s[0]=e=>h.value=e)},null,512),[[F,h.value]]),r("button",{class:"px-2 flex items-center h-8 bg-purple-100 text-purple-600 text-lg rounded-md hover:bg-purple-400 hover:text-purple-50",onClick:N},[_(y(E),null,{default:L(()=>[_(y(G))]),_:1})])])]),c.value==="loading"?(n(),l(x,{key:0},v(6,e=>_(b,{skeleton:!0})),64)):k("",!0),c.value==="success"?(n(!0),l(x,{key:1},v(u,e=>(n(),O(b,{title:e.title,date:e.date,content:e.content,onClick:i=>P(e.id)},null,8,["title","date","content","onClick"]))),256)):k("",!0),c.value==="none"?(n(),l("div",Y,"No Result.")):k("",!0)]))}};export{le as default};
