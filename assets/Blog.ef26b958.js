import{r as w,o as y,a as x,c as l,b as r,F as f,d as v,w as F,v as L,f as _,i as M,u as C,h as k,e as n,n as $,t as j,I as z,g as E}from"./index.769ad58f.js";import{h as O,m as R}from"./utils.fccc7fa6.js";import{a as b,_ as B}from"./index.29aa3aab.js";import{S as U}from"./SearchOutlined.deefaa0f.js";const q={class:"py-5 flex flex-col gap-5"},G={class:"p-4 flex flex-wrap gap-2 justify-between items-center bg-white shadow-md rounded-xl"},H={class:"flex flex-wrap gap-x-3 gap-y-1"},J=r("div",{class:"text-purple-400 font-semibold select-none"},"Blog",-1),K=["onClick"],Q={class:"flex gap-3"},W={key:2,class:"mt-20 text-center text-purple-500"},se={__name:"Blog",setup(X){const p=w([]),S=async()=>{const s=await b.getPostCategories();if(s.code===0){p.push({id:0,name:"All"});const{rows:t}=s.result;for(let e=0,u=t.length;e<u;e++){const d=t[e].id,o=t[e].name;p.push({id:d,name:o})}}};y(()=>{S()});const m=x(0),D=s=>{m.value=s,h()},g=x(""),N=()=>{h()},i=w([]),h=async(s,t)=>{c.value="loading";const e=g.value,u=m.value,d=await b.getPosts(s,t,e,u);if(d.code===0){const{rows:o}=d.result;i.length=0;for(let a=0,T=o.length;a<T;a++){const V=o[a].id,I=o[a].title,P=new Date(o[a].createdAt).toLocaleDateString(),A=O(R(o[a].content));i.push({id:V,title:I,date:P,content:A})}setTimeout(()=>{c.value=i.length===0?"none":"success"},500)}};y(()=>{h()});const c=x("loading");return(s,t)=>(n(),l("div",q,[r("div",G,[r("ul",H,[J,(n(!0),l(f,null,v(p,e=>(n(),l("li",{class:$(["text-gray-400 hover:text-purple-400 cursor-pointer",{"text-purple-400":m.value===e.id}]),key:e,onClick:u=>D(e.id)},j(e.name),11,K))),128))]),r("div",Q,[F(r("input",{type:"text",class:"h-8 p-2 border border-purple-400 rounded-md outline-none text-sm","onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e)},null,512),[[L,g.value]]),r("button",{class:"px-2 flex items-center h-8 bg-purple-100 text-purple-600 text-lg rounded-md hover:bg-purple-400 hover:text-purple-50",onClick:N},[_(C(z),null,{default:M(()=>[_(C(U))]),_:1})])])]),c.value==="loading"?(n(),l(f,{key:0},v(6,e=>_(B,{skeleton:!0})),64)):k("",!0),c.value==="success"?(n(!0),l(f,{key:1},v(i,e=>(n(),E(B,{title:e.title,date:e.date,content:e.content},null,8,["title","date","content"]))),256)):k("",!0),c.value==="none"?(n(),l("div",W,"No Result.")):k("",!0)]))}};export{se as default};
