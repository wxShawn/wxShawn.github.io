import{h as f,m}from"./utils.fccc7fa6.js";import{a as v,_ as i}from"./index.3009ce11.js";import{r as k,a as x,o as y,c as r,b as n,F as d,d as g,e as a,f as w,g as b}from"./index.ca0de2a4.js";const H={class:"py-5 grid grid-cols-1 gap-10"},N=n("div",{class:"h-96 bg-home-banner bg-cover bg-center bg-fixed"},[n("div",{class:"h-full bg-purple-800 bg-opacity-30 flex justify-center items-center"},[n("div",{class:"text-white text-5xl"},"Hello World!")])],-1),S={class:"lg:container flex flex-col gap-5"},V=n("div",{class:"p-4 bg-white text-purple-500 rounded-lg shadow-md select-none"},"\u6700\u65B0\u6587\u7AE0",-1),$={class:"grid gap-5 grid-cols-1"},j={class:"lg:container flex flex-col gap-5"},E=n("div",{class:"p-4 bg-white text-purple-500 rounded-lg shadow-md select-none"},"\u6700\u65B0\u9879\u76EE",-1),M={class:"grid gap-5 sm:grid-cols-1 md:grid-cols-2 2xl:grid-cols-3"},G={__name:"Home",setup(T){const u=k([]),_=x(!0),L=async(o=6)=>{const c=await v.getPosts();if(c.code===0){const t=[],{rows:s}=c.result;for(let e=0,l=s.length;e<l;e++)if(l-e<=o){const D=s[e].id,C=s[e].title,A=new Date(s[e].createdAt).toLocaleDateString(),F=f(m(s[e].content));t.push({id:D,title:C,date:A,content:F})}return _.value=!1,t}};y(async()=>{const o=await L(3);u.push.apply(u,o)});const B=o=>{console.log("click post ",o)},p=k([]),h=x(!0),P=async(o=6)=>{const c=await v.getProjects();if(c.code===0){const t=[],{rows:s}=c.result;for(let e=0,l=s.length;e<l;e++)l-e<=o&&t.push({id:s[e].id,name:s[e].name,date:new Date(s[e].createdAt).toLocaleDateString(),content:f(m(s[e].content)),url:s[e].url,cover:s[e].cover});return h.value=!1,t}};return y(async()=>{const o=await P();p.push.apply(p,o)}),(o,c)=>(a(),r("div",H,[N,n("div",S,[V,n("div",$,[_.value?(a(),r(d,{key:0},g(3,t=>w(i,{skeleton:!0})),64)):(a(!0),r(d,{key:1},g(u,t=>(a(),b(i,{key:t,title:t.title,date:t.date,content:t.content,onClick:s=>B(t.id)},null,8,["title","date","content","onClick"]))),128))])]),n("div",j,[E,n("div",M,[h.value?(a(),r(d,{key:0},g(6,t=>w(i,{skeleton:!0})),64)):(a(!0),r(d,{key:1},g(p,t=>(a(),b(i,{key:t,cover:t.cover,title:t.name,date:t.date,content:t.content},null,8,["cover","title","date","content"]))),128))])])]))}};export{G as default};
